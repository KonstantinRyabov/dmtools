<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>dmtools_intro • dmtools</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="dmtools_intro">
<meta property="og:description" content="dmtools">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dmtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.4.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/about_short.html">about_short</a>
    </li>
    <li>
      <a href="../articles/dmtools_intro.html">dmtools_intro</a>
    </li>
    <li>
      <a href="../articles/meddra_examples.html">meddra_examples</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/chachabooms/dmtools">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>dmtools_intro</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/chachabooms/dmtools/blob/master/vignettes/dmtools_intro.Rmd"><code>vignettes/dmtools_intro.Rmd</code></a></small>
      <div class="hidden name"><code>dmtools_intro.Rmd</code></div>

    </div>

    
    
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dmtools</span>)</pre></body></html></div>
</div>
<div id="overview" class="section level2">
<h2 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h2>
<p>For checking the dataset from EDC in clinical trials. Notice, your dataset should have a postfix( _v1 ) or a prefix( v1_ ) in the names of variables. Column names should be unique.</p>
<ul>
<li>laboratory - Does the investigator correctly estimate the laboratory analyzes?</li>
<li>dates - Do all dates correspond to the protocol’s timeline?</li>
<li>WBCs count - Do absolute equal (all * relative) / 100?</li>
<li>sites - If the clinical trial has different lab reference ranges.</li>
</ul>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<div id="laboratory" class="section level3">
<h3 class="hasAnchor">
<a href="#laboratory" class="anchor"></a>laboratory</h3>
<p>For laboratory check, you need to create the excel table like in the example.</p>
<ul>
<li>AGELOW - number, &gt;= number</li>
<li>AGEHIGH - if none, type Inf, &lt;= number<br>
</li>
<li>SEX - for both sex, use <code><a href="https://rdrr.io/r/base/Logic.html">|</a></code>
</li>
<li>LBTEST - What was the lab test name?</li>
<li>LBORRES - What was the result of the result lab test?</li>
<li>LBNDIND - How [did/do] the reported values compare within the [reference/normal/expected] range?</li>
<li>LBORNRLO - What was the lower limit of the reference range for this lab test, &gt;=</li>
<li>LBORNRHI - What was the high limit of the reference range for this lab test, &lt;=</li>
</ul>
<table class="table">
<caption>lab reference ranges</caption>
<thead><tr class="header">
<th align="right">AGELOW</th>
<th align="right">AGEHIGH</th>
<th align="left">SEX</th>
<th align="left">LBTEST</th>
<th align="left">LBORRES</th>
<th align="left">LBNDIND</th>
<th align="left">LBORNRLO</th>
<th align="left">LBORNRHI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">18</td>
<td align="right">45</td>
<td align="left">f|m</td>
<td align="left">gluc</td>
<td align="left">gluc</td>
<td align="left">gluc_res</td>
<td align="left">3.9</td>
<td align="left">5.9</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">45</td>
<td align="left">m</td>
<td align="left">ast</td>
<td align="left">ast</td>
<td align="left">ast_res</td>
<td align="left">0</td>
<td align="left">42</td>
</tr>
<tr class="odd">
<td align="right">18</td>
<td align="right">45</td>
<td align="left">f</td>
<td align="left">ast</td>
<td align="left">ast</td>
<td align="left">ast_res</td>
<td align="left">0</td>
<td align="left">39</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>dataset</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">age</th>
<th align="left">sex</th>
<th align="left">gluc_v1</th>
<th align="left">gluc_res_v1</th>
<th align="left">ast_v2</th>
<th align="left">ast_res_v2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">19</td>
<td align="left">f</td>
<td align="left">5.5</td>
<td align="left">norm</td>
<td align="left">30</td>
<td align="left">norm</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">20</td>
<td align="left">m</td>
<td align="left">4.1</td>
<td align="left">NA</td>
<td align="left">48</td>
<td align="left">norm</td>
</tr>
<tr class="odd">
<td align="left">03</td>
<td align="left">22</td>
<td align="left">m</td>
<td align="left">9.7</td>
<td align="left">norm</td>
<td align="left">31</td>
<td align="left">norm</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># "norm" and "no" it is an example, necessary variable for the estimate, get from the dataset</span>
<span class="no">refs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"labs_refer.xlsx"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dmtools"</span>)
<span class="no">obj_lab</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/lab.html">lab</a></span>(<span class="no">refs</span>, <span class="no">id</span>, <span class="no">age</span>, <span class="no">sex</span>, <span class="st">"norm"</span>, <span class="st">"no"</span>)
<span class="no">obj_lab</span> <span class="kw">&lt;-</span> <span class="no">obj_lab</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/check.html">check</a></span>(<span class="no">df</span>)

<span class="co"># ok - analysis, which has a correct estimate of the result</span>
<span class="no">obj_lab</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"ok"</span>)
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 01  19   f   gluc    gluc   _v1      3.9      5.9     5.5    norm</span>
<span class="co">#&gt; 2 01  19   f    ast     ast   _v2      0.0     39.0      30    norm</span>
<span class="co">#&gt; 3 03  22   m    ast     ast   _v2      0.0     42.0      31    norm</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED</span>
<span class="co">#&gt; 1          5.5         norm</span>
<span class="co">#&gt; 2         30.0         norm</span>
<span class="co">#&gt; 3         31.0         norm</span>

<span class="co"># mis - analysis, which has an incorrect estimate of the result</span>
<span class="no">obj_lab</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"mis"</span>)
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 02  20   m    ast     ast   _v2      0.0     42.0      48    norm</span>
<span class="co">#&gt; 2 03  22   m   gluc    gluc   _v1      3.9      5.9     9.7    norm</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED</span>
<span class="co">#&gt; 1         48.0           no</span>
<span class="co">#&gt; 2          9.7           no</span>

<span class="co"># skip - analysis, which has an empty value of the estimate</span>
<span class="no">obj_lab</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"skip"</span>)
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 02  20   m   gluc    gluc   _v1      3.9      5.9     4.1    &lt;NA&gt;</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED</span>
<span class="co">#&gt; 1          4.1         &lt;NA&gt;</span>

<span class="co"># all analyzes </span>
<span class="no">obj_lab</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/get_result.html">get_result</a></span>()
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 01  19   f   gluc    gluc   _v1      3.9      5.9     5.5    norm</span>
<span class="co">#&gt; 2 01  19   f    ast     ast   _v2      0.0     39.0      30    norm</span>
<span class="co">#&gt; 3 02  20   m   gluc    gluc   _v1      3.9      5.9     4.1    &lt;NA&gt;</span>
<span class="co">#&gt; 4 02  20   m    ast     ast   _v2      0.0     42.0      48    norm</span>
<span class="co">#&gt; 5 03  22   m   gluc    gluc   _v1      3.9      5.9     9.7    norm</span>
<span class="co">#&gt; 6 03  22   m    ast     ast   _v2      0.0     42.0      31    norm</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED IS_RIGHT</span>
<span class="co">#&gt; 1          5.5         norm     TRUE</span>
<span class="co">#&gt; 2         30.0         norm     TRUE</span>
<span class="co">#&gt; 3          4.1         &lt;NA&gt;       NA</span>
<span class="co">#&gt; 4         48.0           no    FALSE</span>
<span class="co">#&gt; 5          9.7           no    FALSE</span>
<span class="co">#&gt; 6         31.0         norm     TRUE</span></pre></body></html></div>
</div>
<div id="dates" class="section level3">
<h3 class="hasAnchor">
<a href="#dates" class="anchor"></a>dates</h3>
<p>For dates check, you need to create the excel table like in the example.</p>
<ul>
<li>minus, plus, shift - parameter of timeline</li>
<li>num_visit - parameter for function e.g. <code>contains(num_visit)</code>
</li>
<li>name_visit - friendly name of visit</li>
<li>standard_date - standard date from a dataset, with postfix or prefix</li>
<li>standard_name - friendly name of standard date</li>
<li>check_equal - check date equality within a visit</li>
<li>equal_date - date for check equality from a dataset, with postfix or prefix</li>
</ul>
<table class="table">
<caption>timeline</caption>
<thead><tr class="header">
<th align="left">num_visit</th>
<th align="left">name_visit</th>
<th align="right">minus</th>
<th align="right">plus</th>
<th align="right">shift</th>
<th align="left">standard_date</th>
<th align="left">standard_name</th>
<th align="left">check_equal</th>
<th align="left">equal_date</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">E1</td>
<td align="left">screening</td>
<td align="right">0</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="left">screen_date_E1</td>
<td align="left">date of screening</td>
<td align="left">F</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">E2</td>
<td align="left">rand</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="left">rand_date_E2</td>
<td align="left">date of randomization</td>
<td align="left">T</td>
<td align="left">rand_date_E2</td>
</tr>
<tr class="odd">
<td align="left">E3</td>
<td align="left">visit 2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">5</td>
<td align="left">rand_date_E2</td>
<td align="left">date of randomization</td>
<td align="left">T</td>
<td align="left">ph_date_E3</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>dataset</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="left">screen_date_E1</th>
<th align="left">rand_date_E2</th>
<th align="left">ph_date_E3</th>
<th align="left">bio_date_E3</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="left">1991-03-13</td>
<td align="left">1991-03-15</td>
<td align="left">1991-03-21</td>
<td align="left">1991-03-23</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="left">1991-03-07</td>
<td align="left">1991-03-11</td>
<td align="left">1991-03-16</td>
<td align="left">1991-03-16</td>
</tr>
<tr class="odd">
<td align="left">03</td>
<td align="left">1991-03-08</td>
<td align="left">1991-03-10</td>
<td align="left">1991-03-16</td>
<td align="left">1991-03-16</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="co"># use parameter str_date for search columns with dates, default:"DAT"</span>
<span class="no">dates</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"dates.xlsx"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dmtools"</span>)
<span class="no">obj_date</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/date.html">date</a></span>(<span class="no">dates</span>, <span class="no">id</span>, <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="no"><a href="https://dplyr.tidyverse.org/reference/reexports.html">contains</a></span>, <span class="kw pkg">dplyr</span><span class="kw ns">::</span><span class="no"><a href="https://dplyr.tidyverse.org/reference/reexports.html">matches</a></span>)
<span class="no">obj_date</span> <span class="kw">&lt;-</span> <span class="no">obj_date</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/check.html">check</a></span>(<span class="no">df</span>)

<span class="co"># out - dates, which are out of the protocol's timeline</span>
<span class="no">obj_date</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"out"</span>)
<span class="co">#&gt;   id         standard_name standard_date name_event   name_item  date_item</span>
<span class="co">#&gt; 1 01 date of randomization    1991-03-15    visit 2 bio_date_E3 1991-03-23</span>
<span class="co">#&gt;                standard_interval out</span>
<span class="co">#&gt; 1 1991-03-19 UTC--1991-03-21 UTC -&gt;2</span>

<span class="co"># uneq - dates, which are unequal</span>
<span class="no">obj_date</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"uneq"</span>)
<span class="co">#&gt;   id name_event   name_item  date_item stand_equal is_in_timeline</span>
<span class="co">#&gt; 1 01    visit 2 bio_date_E3 1991-03-23  1991-03-21          FALSE</span>

<span class="co"># ok - correct dates</span>
<span class="no">obj_date</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"ok"</span>)
<span class="co">#&gt;    id         standard_name standard_date name_event      name_item  date_item</span>
<span class="co">#&gt; 1  01     date of screening    1991-03-13  screening screen_date_E1 1991-03-13</span>
<span class="co">#&gt; 2  01 date of randomization    1991-03-15       rand   rand_date_E2 1991-03-15</span>
<span class="co">#&gt; 3  01 date of randomization    1991-03-15    visit 2     ph_date_E3 1991-03-21</span>
<span class="co">#&gt; 4  02     date of screening    1991-03-07  screening screen_date_E1 1991-03-07</span>
<span class="co">#&gt; 5  02 date of randomization    1991-03-11       rand   rand_date_E2 1991-03-11</span>
<span class="co">#&gt; 6  02 date of randomization    1991-03-11    visit 2     ph_date_E3 1991-03-16</span>
<span class="co">#&gt; 7  02 date of randomization    1991-03-11    visit 2    bio_date_E3 1991-03-16</span>
<span class="co">#&gt; 8  03     date of screening    1991-03-08  screening screen_date_E1 1991-03-08</span>
<span class="co">#&gt; 9  03 date of randomization    1991-03-10       rand   rand_date_E2 1991-03-10</span>
<span class="co">#&gt; 10 03 date of randomization    1991-03-10    visit 2     ph_date_E3 1991-03-16</span>
<span class="co">#&gt; 11 03 date of randomization    1991-03-10    visit 2    bio_date_E3 1991-03-16</span>
<span class="co">#&gt;                 standard_interval stand_equal</span>
<span class="co">#&gt; 1  1991-03-13 UTC--1991-03-16 UTC  1991-03-13</span>
<span class="co">#&gt; 2  1991-03-15 UTC--1991-03-15 UTC  1991-03-15</span>
<span class="co">#&gt; 3  1991-03-19 UTC--1991-03-21 UTC  1991-03-21</span>
<span class="co">#&gt; 4  1991-03-07 UTC--1991-03-10 UTC  1991-03-07</span>
<span class="co">#&gt; 5  1991-03-11 UTC--1991-03-11 UTC  1991-03-11</span>
<span class="co">#&gt; 6  1991-03-15 UTC--1991-03-17 UTC  1991-03-16</span>
<span class="co">#&gt; 7  1991-03-15 UTC--1991-03-17 UTC  1991-03-16</span>
<span class="co">#&gt; 8  1991-03-08 UTC--1991-03-11 UTC  1991-03-08</span>
<span class="co">#&gt; 9  1991-03-10 UTC--1991-03-10 UTC  1991-03-10</span>
<span class="co">#&gt; 10 1991-03-14 UTC--1991-03-16 UTC  1991-03-16</span>
<span class="co">#&gt; 11 1991-03-14 UTC--1991-03-16 UTC  1991-03-16</span>

<span class="co"># all dates</span>
<span class="no">obj_date</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/get_result.html">get_result</a></span>()
<span class="co">#&gt;    id         standard_name standard_date name_event      name_item  date_item</span>
<span class="co">#&gt; 1  01     date of screening    1991-03-13  screening screen_date_E1 1991-03-13</span>
<span class="co">#&gt; 2  01 date of randomization    1991-03-15       rand   rand_date_E2 1991-03-15</span>
<span class="co">#&gt; 3  01 date of randomization    1991-03-15    visit 2     ph_date_E3 1991-03-21</span>
<span class="co">#&gt; 4  01 date of randomization    1991-03-15    visit 2    bio_date_E3 1991-03-23</span>
<span class="co">#&gt; 5  02     date of screening    1991-03-07  screening screen_date_E1 1991-03-07</span>
<span class="co">#&gt; 6  02 date of randomization    1991-03-11       rand   rand_date_E2 1991-03-11</span>
<span class="co">#&gt; 7  02 date of randomization    1991-03-11    visit 2     ph_date_E3 1991-03-16</span>
<span class="co">#&gt; 8  02 date of randomization    1991-03-11    visit 2    bio_date_E3 1991-03-16</span>
<span class="co">#&gt; 9  03     date of screening    1991-03-08  screening screen_date_E1 1991-03-08</span>
<span class="co">#&gt; 10 03 date of randomization    1991-03-10       rand   rand_date_E2 1991-03-10</span>
<span class="co">#&gt; 11 03 date of randomization    1991-03-10    visit 2     ph_date_E3 1991-03-16</span>
<span class="co">#&gt; 12 03 date of randomization    1991-03-10    visit 2    bio_date_E3 1991-03-16</span>
<span class="co">#&gt;                 standard_interval stand_equal is_in_timeline is_equal out</span>
<span class="co">#&gt; 1  1991-03-13 UTC--1991-03-16 UTC  1991-03-13           TRUE     TRUE   0</span>
<span class="co">#&gt; 2  1991-03-15 UTC--1991-03-15 UTC  1991-03-15           TRUE     TRUE   0</span>
<span class="co">#&gt; 3  1991-03-19 UTC--1991-03-21 UTC  1991-03-21           TRUE     TRUE   0</span>
<span class="co">#&gt; 4  1991-03-19 UTC--1991-03-21 UTC  1991-03-21          FALSE    FALSE -&gt;2</span>
<span class="co">#&gt; 5  1991-03-07 UTC--1991-03-10 UTC  1991-03-07           TRUE     TRUE   0</span>
<span class="co">#&gt; 6  1991-03-11 UTC--1991-03-11 UTC  1991-03-11           TRUE     TRUE   0</span>
<span class="co">#&gt; 7  1991-03-15 UTC--1991-03-17 UTC  1991-03-16           TRUE     TRUE   0</span>
<span class="co">#&gt; 8  1991-03-15 UTC--1991-03-17 UTC  1991-03-16           TRUE     TRUE   0</span>
<span class="co">#&gt; 9  1991-03-08 UTC--1991-03-11 UTC  1991-03-08           TRUE     TRUE   0</span>
<span class="co">#&gt; 10 1991-03-10 UTC--1991-03-10 UTC  1991-03-10           TRUE     TRUE   0</span>
<span class="co">#&gt; 11 1991-03-14 UTC--1991-03-16 UTC  1991-03-16           TRUE     TRUE   0</span>
<span class="co">#&gt; 12 1991-03-14 UTC--1991-03-16 UTC  1991-03-16           TRUE     TRUE   0</span></pre></body></html></div>
<p><code><a href="https://dplyr.tidyverse.org/reference/reexports.html">dplyr::contains</a></code> - A function, which select necessary visit or event e.g. dplyr::start_with, dplyr::contains. It works like <code>df %&gt;% select(contains("E1"))</code>. You also can use <code>dplyr::start_with</code>, works like <code>df %&gt;% select(start_with("V1"))</code></p>
<p><code><a href="https://dplyr.tidyverse.org/reference/reexports.html">dplyr::matches</a></code> - A function, which select dates from necessary visit e.g. dplyr::matches, dplyr::contains. It works like <code>visit_one %&gt;% select(contains("DAT"))</code>, default: <code><a href="https://dplyr.tidyverse.org/reference/reexports.html">dplyr::contains()</a></code></p>
</div>
<div id="wbcs-count" class="section level3">
<h3 class="hasAnchor">
<a href="#wbcs-count" class="anchor"></a>WBCs count</h3>
<p>For WBCs count check, you need to create the excel table like in the example.<br>
Formula for check is (all * relative) / 100 = absolute.</p>
<ul>
<li>human_name - friendly name for WBCs count</li>
<li>absolute - absolute WBCs from dataset, without postfix or prefix</li>
<li>relative - relative WBCs from dataset, without postfix or prefix</li>
</ul>
<table class="table">
<caption>wbcc</caption>
<thead><tr class="header">
<th align="left">human_name</th>
<th align="left">absolute</th>
<th align="left">relative</th>
<th align="left">all</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">lymphocytes</td>
<td align="left">lym_abs</td>
<td align="left">lym_rel</td>
<td align="left">wbc</td>
</tr></tbody>
</table>
<table class="table">
<caption>dataset</caption>
<thead><tr class="header">
<th align="left">id</th>
<th align="right">wbc_v1</th>
<th align="right">lym_rel_v1</th>
<th align="right">lym_abs_v1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">01</td>
<td align="right">5.6</td>
<td align="right">21</td>
<td align="right">1.18</td>
</tr>
<tr class="even">
<td align="left">02</td>
<td align="right">7.8</td>
<td align="right">25</td>
<td align="right">1.95</td>
</tr>
<tr class="odd">
<td align="left">03</td>
<td align="right">8.1</td>
<td align="right">30</td>
<td align="right">2.13</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="no">wbcc_file</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"wbcc.xlsx"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dmtools"</span>)
<span class="no">wbcc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/wbc.html">wbc</a></span>(<span class="no">wbcc_file</span>, <span class="no">id</span>)
<span class="no">wbcc</span> <span class="kw">&lt;-</span> <span class="no">wbcc</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/check.html">check</a></span>(<span class="no">df</span>)

<span class="co"># mis - wbc, which has an incorrect calculation</span>
<span class="no">wbcc</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"mis"</span>)
<span class="co">#&gt;   id  human_name   lab_name rel all  abs auto_abs</span>
<span class="co">#&gt; 1 03 lymphocytes lym_abs_v1  30 8.1 2.13     2.43</span>

<span class="co"># ok - wbc, which has a correct calculation</span>
<span class="no">wbcc</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="st">"ok"</span>)
<span class="co">#&gt;   id  human_name   lab_name rel all  abs auto_abs</span>
<span class="co">#&gt; 1 01 lymphocytes lym_abs_v1  21 5.6 1.18     1.18</span>
<span class="co">#&gt; 2 02 lymphocytes lym_abs_v1  25 7.8 1.95     1.95</span>

<span class="co"># all WBCs count</span>
<span class="no">wbcc</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/get_result.html">get_result</a></span>()
<span class="co">#&gt;   id  human_name   lab_name rel all  abs auto_abs is_right</span>
<span class="co">#&gt; 1 01 lymphocytes lym_abs_v1  21 5.6 1.18     1.18     TRUE</span>
<span class="co">#&gt; 2 02 lymphocytes lym_abs_v1  25 7.8 1.95     1.95     TRUE</span>
<span class="co">#&gt; 3 03 lymphocytes lym_abs_v1  30 8.1 2.13     2.43    FALSE</span></pre></body></html></div>
</div>
<div id="sites" class="section level3">
<h3 class="hasAnchor">
<a href="#sites" class="anchor"></a>sites</h3>
<p>If the clinical trial has different sites and lab reference ranges.</p>
<table class="table">
<caption>lab reference ranges s01</caption>
<thead><tr class="header">
<th align="right">AGELOW</th>
<th align="right">AGEHIGH</th>
<th align="left">SEX</th>
<th align="left">LBTEST</th>
<th align="left">LBORRES</th>
<th align="left">LBNDIND</th>
<th align="left">LBORNRLO</th>
<th align="left">LBORNRHI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">18</td>
<td align="right">45</td>
<td align="left">f|m</td>
<td align="left">gluc</td>
<td align="left">gluc</td>
<td align="left">gluc_res</td>
<td align="left">4.0</td>
<td align="left">5.9</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">40</td>
<td align="left">m</td>
<td align="left">ast</td>
<td align="left">ast</td>
<td align="left">ast_res</td>
<td align="left">0</td>
<td align="left">41</td>
</tr>
<tr class="odd">
<td align="right">18</td>
<td align="right">39</td>
<td align="left">f</td>
<td align="left">ast</td>
<td align="left">ast</td>
<td align="left">ast_res</td>
<td align="left">0</td>
<td align="left">43</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>lab reference ranges s02</caption>
<thead><tr class="header">
<th align="right">AGELOW</th>
<th align="right">AGEHIGH</th>
<th align="left">SEX</th>
<th align="left">LBTEST</th>
<th align="left">LBORRES</th>
<th align="left">LBNDIND</th>
<th align="left">LBORNRLO</th>
<th align="left">LBORNRHI</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">18</td>
<td align="right">45</td>
<td align="left">f|m</td>
<td align="left">gluc</td>
<td align="left">gluc</td>
<td align="left">gluc_res</td>
<td align="left">4.2</td>
<td align="left">6.1</td>
</tr>
<tr class="even">
<td align="right">18</td>
<td align="right">40</td>
<td align="left">m</td>
<td align="left">ast</td>
<td align="left">ast</td>
<td align="left">ast_res</td>
<td align="left">0</td>
<td align="left">35</td>
</tr>
<tr class="odd">
<td align="right">19</td>
<td align="right">41</td>
<td align="left">f</td>
<td align="left">ast</td>
<td align="left">ast</td>
<td align="left">ast_res</td>
<td align="left">0</td>
<td align="left">41</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>dataset</caption>
<thead><tr class="header">
<th align="left">site</th>
<th align="left">id</th>
<th align="left">age</th>
<th align="left">sex</th>
<th align="left">gluc_v1</th>
<th align="left">gluc_res_v1</th>
<th align="left">ast_v2</th>
<th align="left">ast_res_v2</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">site 01</td>
<td align="left">01</td>
<td align="left">19</td>
<td align="left">f</td>
<td align="left">5.5</td>
<td align="left">norm</td>
<td align="left">30</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">site 02</td>
<td align="left">02</td>
<td align="left">20</td>
<td align="left">m</td>
<td align="left">4.1</td>
<td align="left">no</td>
<td align="left">48</td>
<td align="left">norm</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">refs_s01</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"labs_refer_s01.xlsx"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dmtools"</span>)
<span class="no">refs_s02</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"labs_refer_s02.xlsx"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"dmtools"</span>)

<span class="no">s01_lab</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/lab.html">lab</a></span>(<span class="no">refs_s01</span>, <span class="no">id</span>, <span class="no">age</span>, <span class="no">sex</span>, <span class="st">"norm"</span>, <span class="st">"no"</span>, <span class="kw">site</span> <span class="kw">=</span> <span class="st">"site 01"</span>)
<span class="no">s02_lab</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/lab.html">lab</a></span>(<span class="no">refs_s02</span>, <span class="no">id</span>, <span class="no">age</span>, <span class="no">sex</span>, <span class="st">"norm"</span>, <span class="st">"no"</span>, <span class="kw">site</span> <span class="kw">=</span> <span class="st">"site 02"</span>)

<span class="no">labs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">s01_lab</span>, <span class="no">s02_lab</span>)
<span class="no">labs</span> <span class="kw">&lt;-</span> <span class="no">labs</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/check_sites.html">check_sites</a></span>(<span class="no">df</span>, <span class="no">site</span>)

<span class="co"># mis - analysis, which has an incorrect estimate of the result</span>
<span class="no">labs</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/test_sites.html">test_sites</a></span>(<span class="kw">function</span> (<span class="no">lab</span>) <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="no">lab</span>, <span class="st">"mis"</span>))
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 02  20   m    ast     ast   _v2        0       35      48    norm</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED num_site</span>
<span class="co">#&gt; 1           48           no  site 02</span>

<span class="co"># ok - analysis, which has a correct estimate of the result</span>
<span class="no">labs</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/test_sites.html">test_sites</a></span>(<span class="kw">function</span> (<span class="no">lab</span>) <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="no">lab</span>, <span class="st">"ok"</span>))
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 01  19   f   gluc    gluc   _v1      4.0      5.9     5.5    norm</span>
<span class="co">#&gt; 2 02  20   m   gluc    gluc   _v1      4.2      6.1     4.1      no</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED num_site</span>
<span class="co">#&gt; 1          5.5         norm  site 01</span>
<span class="co">#&gt; 2          4.1           no  site 02</span>

<span class="co"># skip - analysis, which has an empty value of the estimate</span>
<span class="no">labs</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/test_sites.html">test_sites</a></span>(<span class="kw">function</span> (<span class="no">lab</span>) <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="no">lab</span>, <span class="st">"skip"</span>))
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 01  19   f    ast     ast   _v2        0       43      30    &lt;NA&gt;</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED num_site</span>
<span class="co">#&gt; 1           30         &lt;NA&gt;  site 01</span>

<span class="co"># all analyzes</span>
<span class="no">labs</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/test_sites.html">test_sites</a></span>(<span class="kw">function</span> (<span class="no">lab</span>) <span class="fu"><a href="../reference/get_result.html">get_result</a></span>(<span class="no">lab</span>))
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 01  19   f   gluc    gluc   _v1      4.0      5.9     5.5    norm</span>
<span class="co">#&gt; 2 01  19   f    ast     ast   _v2      0.0     43.0      30    &lt;NA&gt;</span>
<span class="co">#&gt; 3 02  20   m   gluc    gluc   _v1      4.2      6.1     4.1      no</span>
<span class="co">#&gt; 4 02  20   m    ast     ast   _v2      0.0     35.0      48    norm</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED IS_RIGHT num_site</span>
<span class="co">#&gt; 1          5.5         norm     TRUE  site 01</span>
<span class="co">#&gt; 2         30.0         &lt;NA&gt;       NA  site 01</span>
<span class="co">#&gt; 3          4.1           no     TRUE  site 02</span>
<span class="co">#&gt; 4         48.0           no    FALSE  site 02</span>

<span class="co"># you can combine sites, use |</span>
<span class="no">comb_lab</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/lab.html">lab</a></span>(<span class="no">refs_s01</span>, <span class="no">id</span>, <span class="no">age</span>, <span class="no">sex</span>, <span class="st">"norm"</span>, <span class="st">"no"</span>, <span class="kw">site</span> <span class="kw">=</span> <span class="st">"site 01|site 02"</span>)
<span class="no">comb_labs</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="no">comb_lab</span>)

<span class="no">comb_labs</span> <span class="kw">&lt;-</span> <span class="no">comb_labs</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/check_sites.html">check_sites</a></span>(<span class="no">df</span>, <span class="no">site</span>)
<span class="no">comb_labs</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="../reference/test_sites.html">test_sites</a></span>(<span class="kw">function</span> (<span class="no">lab</span>) <span class="fu"><a href="../reference/choose_test.html">choose_test</a></span>(<span class="no">lab</span>, <span class="st">"mis"</span>))
<span class="co">#&gt;   id age sex LBTEST LBTESCD VISIT LBORNRLO LBORNRHI LBORRES LBNRIND</span>
<span class="co">#&gt; 1 02  20   m   gluc    gluc   _v1        4      5.9     4.1      no</span>
<span class="co">#&gt; 2 02  20   m    ast     ast   _v2        0     41.0      48    norm</span>
<span class="co">#&gt;   RES_TYPE_NUM IND_EXPECTED        num_site</span>
<span class="co">#&gt; 1          4.1         norm site 01|site 02</span>
<span class="co">#&gt; 2         48.0           no site 01|site 02</span></pre></body></html></div>
</div>
<div id="rename" class="section level3">
<h3 class="hasAnchor">
<a href="#rename" class="anchor"></a>rename</h3>
<p>Function to rename the dataset, using crfs.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/rename_dataset.html">rename_dataset</a></span>(<span class="st">"./crfs"</span>, <span class="st">"old_name"</span>, <span class="st">"new_name"</span>, <span class="fl">2</span>)</pre></body></html></div>
<ul>
<li>“./crfs” - path to crfs</li>
<li>“old_name” - variable for names in the dataset, without postfix or prefix</li>
<li>“new_name” - variable for necessary names, names should be unique</li>
<li>2 - a position of a sheet in the excel document, where dmtools can find “old_name” and “new_name”</li>
</ul>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Konstantin Ryabov.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
